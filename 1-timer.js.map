{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\n\nconst datePicker = document.getElementById('datetime-picker');\nconst startBtn = document.querySelector('.start-btn');\nconst restartBtn = document.querySelector('.restart-btn');\nconst timerData = {\n  days: document.querySelector('[data-days]'),\n  hours: document.querySelector('[data-hours]'),\n  minutes: document.querySelector('[data-minutes]'),\n  seconds: document.querySelector('[data-seconds]'),\n};\n\nlet initTime;\nlet intervalId;\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    initTime = selectedDates[0];\n    if (initTime < Date.now()) {\n      alert('Please choose a date in the future');\n      startBtn.setAttribute('disabled', '');\n    }\n    if (initTime > Date.now()) startBtn.removeAttribute('disabled');\n    startBtn.addEventListener('click', handleUserStart);\n  },\n};\n\nfunction handleUserStart(e) {\n  intervalId = setInterval(() => {\n    datePicker.setAttribute('disabled', '');\n    startBtn.setAttribute('disabled', '');\n    startBtn.classList.add('hide');\n    startBtn.classList.add('visually-hidden');\n    restartBtn.classList.remove('visually-hidden');\n    restartBtn.classList.add('on-screen');\n    const currentTime = new Date();\n    const diffMs = initTime - currentTime;\n    const { days, hours, minutes, seconds } = convertMs(diffMs);\n    timerData.days.textContent = days;\n    timerData.hours.textContent = hours;\n    timerData.minutes.textContent = minutes;\n    timerData.seconds.textContent = seconds;\n    if (diffMs <= 0) {\n      datePicker.removeAttribute('disabled');\n      startBtn.removeAttribute('disabled');\n      startBtn.classList.remove('hide');\n      startBtn.classList.remove('visually-hidden');\n      restartBtn.classList.remove('on-screen');\n      restartBtn.classList.add('visually-hidden');\n      clearInterval(intervalId);\n      timerData.days.textContent = '00';\n      timerData.hours.textContent = '00';\n      timerData.minutes.textContent = '00';\n      timerData.seconds.textContent = '00';\n    }\n  }, 1000);\n}\n\nfunction handleUserRestart(e) {\n  clearInterval(intervalId);\n  datePicker.removeAttribute('disabled');\n  startBtn.removeAttribute('disabled');\n  startBtn.classList.remove('hide');\n  startBtn.classList.remove('visually-hidden');\n  restartBtn.classList.remove('on-screen');\n  restartBtn.classList.add('visually-hidden');\n  timerData.days.textContent = '00';\n  timerData.hours.textContent = '00';\n  timerData.minutes.textContent = '00';\n  timerData.seconds.textContent = '00';\n}\n\nrestartBtn.addEventListener('click', handleUserRestart);\n\nflatpickr(datePicker, options);\n\nfunction convertMs(ms) {\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  const days = Math.floor(ms / day)\n    .toString()\n    .padStart(2, '0');\n  const hours = Math.floor((ms % day) / hour)\n    .toString()\n    .padStart(2, '0');\n  const minutes = Math.floor(((ms % day) % hour) / minute)\n    .toString()\n    .padStart(2, '0');\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second)\n    .toString()\n    .padStart(2, '0');\n\n  return { days, hours, minutes, seconds };\n}\n"],"names":["datePicker","startBtn","restartBtn","timerData","initTime","intervalId","options","selectedDates","handleUserStart","e","diffMs","days","hours","minutes","seconds","convertMs","handleUserRestart","flatpickr","ms"],"mappings":"sIAGA,MAAMA,EAAa,SAAS,eAAe,iBAAiB,EACtDC,EAAW,SAAS,cAAc,YAAY,EAC9CC,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAY,CAChB,KAAM,SAAS,cAAc,aAAa,EAC1C,MAAO,SAAS,cAAc,cAAc,EAC5C,QAAS,SAAS,cAAc,gBAAgB,EAChD,QAAS,SAAS,cAAc,gBAAgB,CAClD,EAEA,IAAIC,EACAC,EAEJ,MAAMC,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrBH,EAAWG,EAAc,CAAC,EACtBH,EAAW,KAAK,QAClB,MAAM,oCAAoC,EAC1CH,EAAS,aAAa,WAAY,EAAE,GAElCG,EAAW,KAAK,IAAK,GAAEH,EAAS,gBAAgB,UAAU,EAC9DA,EAAS,iBAAiB,QAASO,CAAe,CACnD,CACH,EAEA,SAASA,EAAgBC,EAAG,CAC1BJ,EAAa,YAAY,IAAM,CAC7BL,EAAW,aAAa,WAAY,EAAE,EACtCC,EAAS,aAAa,WAAY,EAAE,EACpCA,EAAS,UAAU,IAAI,MAAM,EAC7BA,EAAS,UAAU,IAAI,iBAAiB,EACxCC,EAAW,UAAU,OAAO,iBAAiB,EAC7CA,EAAW,UAAU,IAAI,WAAW,EAEpC,MAAMQ,EAASN,EADK,IAAI,KAElB,CAAE,KAAAO,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAS,EAAGC,EAAUL,CAAM,EAC1DP,EAAU,KAAK,YAAcQ,EAC7BR,EAAU,MAAM,YAAcS,EAC9BT,EAAU,QAAQ,YAAcU,EAChCV,EAAU,QAAQ,YAAcW,EAC5BJ,GAAU,IACZV,EAAW,gBAAgB,UAAU,EACrCC,EAAS,gBAAgB,UAAU,EACnCA,EAAS,UAAU,OAAO,MAAM,EAChCA,EAAS,UAAU,OAAO,iBAAiB,EAC3CC,EAAW,UAAU,OAAO,WAAW,EACvCA,EAAW,UAAU,IAAI,iBAAiB,EAC1C,cAAcG,CAAU,EACxBF,EAAU,KAAK,YAAc,KAC7BA,EAAU,MAAM,YAAc,KAC9BA,EAAU,QAAQ,YAAc,KAChCA,EAAU,QAAQ,YAAc,KAEnC,EAAE,GAAI,CACT,CAEA,SAASa,EAAkBP,EAAG,CAC5B,cAAcJ,CAAU,EACxBL,EAAW,gBAAgB,UAAU,EACrCC,EAAS,gBAAgB,UAAU,EACnCA,EAAS,UAAU,OAAO,MAAM,EAChCA,EAAS,UAAU,OAAO,iBAAiB,EAC3CC,EAAW,UAAU,OAAO,WAAW,EACvCA,EAAW,UAAU,IAAI,iBAAiB,EAC1CC,EAAU,KAAK,YAAc,KAC7BA,EAAU,MAAM,YAAc,KAC9BA,EAAU,QAAQ,YAAc,KAChCA,EAAU,QAAQ,YAAc,IAClC,CAEAD,EAAW,iBAAiB,QAASc,CAAiB,EAEtDC,EAAUjB,EAAYM,CAAO,EAE7B,SAASS,EAAUG,EAAI,CAMrB,MAAMP,EAAO,KAAK,MAAMO,EAAK,KAAG,EAC7B,SAAQ,EACR,SAAS,EAAG,GAAG,EACZN,EAAQ,KAAK,MAAOM,EAAK,MAAO,IAAI,EACvC,SAAQ,EACR,SAAS,EAAG,GAAG,EACZL,EAAU,KAAK,MAAQK,EAAK,MAAO,KAAQ,GAAM,EACpD,SAAQ,EACR,SAAS,EAAG,GAAG,EACZJ,EAAU,KAAK,MAASI,EAAK,MAAO,KAAQ,IAAU,GAAM,EAC/D,SAAQ,EACR,SAAS,EAAG,GAAG,EAElB,MAAO,CAAE,KAAAP,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAS,CAC1C"}